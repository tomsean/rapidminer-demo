<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<process version="5.3.000">
  <context>
    <input/>
    <output/>
    <macros>
      <macro>
        <key>numberOfClusterIterations</key>
        <value>15</value>
      </macro>
      <macro>
        <key>processToRun</key>
        <value>readAndProcessEcoliData</value>
      </macro>
      <macro>
        <key>locationOfData</key>
        <value>PathToYourData\ecoli.data</value>
      </macro>
    </macros>
  </context>
  <operator activated="true" class="process" compatibility="5.3.000" expanded="true" name="Process">
    <description>&lt;h1&gt;Important note: &lt;/h1&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h2&gt;There are three files needed for this process as follows.&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;clusterVisualisation.xml - a RapidMiner process - this file&lt;/li&gt;
&lt;li&gt;readAndProcessEcoliData.xml - a RapidMiner process called from this process&lt;/li&gt;
&lt;li&gt;ecoli.data - the Ecoli data contained in a text file.&lt;/li&gt;
&lt;/ul&gt;
&lt;br&gt;
Store the processes in your repository.
&lt;br&gt;
&lt;h2&gt;Macros&lt;/h2&gt;
In the process context, edit the following macros to ensure you run the correct process to load the ecoli data
&lt;ul&gt;
&lt;li&gt;processToRun - set this to the name of the process that reads and processes the Ecoli data - the default is readAndProcessEcoliData.&lt;/li&gt;
&lt;li&gt;locationOfData - set this to the full path to the file containing the Ecoli data that you downloaded.
&lt;/ul&gt;</description>
    <parameter key="logverbosity" value="init"/>
    <parameter key="random_seed" value="2001"/>
    <parameter key="send_mail" value="never"/>
    <parameter key="notification_email" value=""/>
    <parameter key="process_duration_for_mail" value="30"/>
    <parameter key="encoding" value="SYSTEM"/>
    <parameter key="parallelize_main_process" value="false"/>
    <process expanded="true" height="820" width="614">
      <operator activated="true" class="generate_data" compatibility="5.3.000" expanded="true" height="60" name="Generate data for testing" width="90" x="179" y="30">
        <parameter key="target_function" value="gaussian mixture clusters"/>
        <parameter key="number_examples" value="100"/>
        <parameter key="number_of_attributes" value="3"/>
        <parameter key="attributes_lower_bound" value="-10.0"/>
        <parameter key="attributes_upper_bound" value="10.0"/>
        <parameter key="use_local_random_seed" value="true"/>
        <parameter key="local_random_seed" value="2"/>
        <parameter key="datamanagement" value="double_array"/>
      </operator>
      <operator activated="true" class="rename" compatibility="5.3.000" expanded="true" height="76" name="Rename" width="90" x="179" y="120">
        <parameter key="old_name" value="label"/>
        <parameter key="new_name" value="site"/>
        <list key="rename_additional_attributes"/>
      </operator>
      <operator activated="true" class="execute_process" compatibility="5.3.000" expanded="true" height="76" name="Execute Process" width="90" x="45" y="30">
        <parameter key="process_location" value="%{processToRun}"/>
        <parameter key="use_input" value="false"/>
        <parameter key="store_output" value="true"/>
        <parameter key="propagate_metadata_recursively" value="false"/>
        <parameter key="cache_process" value="false"/>
        <list key="macros">
          <parameter key="fileToRead" value="%{locationOfData}"/>
        </list>
      </operator>
      <operator activated="true" class="select_attributes" compatibility="5.3.000" expanded="true" height="76" name="Select Attributes" width="90" x="45" y="120">
        <parameter key="attribute_filter_type" value="subset"/>
        <parameter key="attribute" value=""/>
        <parameter key="attributes" value="|sequenceName"/>
        <parameter key="use_except_expression" value="false"/>
        <parameter key="value_type" value="attribute_value"/>
        <parameter key="use_value_type_exception" value="false"/>
        <parameter key="except_value_type" value="time"/>
        <parameter key="block_type" value="attribute_block"/>
        <parameter key="use_block_type_exception" value="false"/>
        <parameter key="except_block_type" value="value_matrix_row_start"/>
        <parameter key="invert_selection" value="true"/>
        <parameter key="include_special_attributes" value="true"/>
      </operator>
      <operator activated="true" class="loop" compatibility="5.3.000" expanded="true" height="76" name="Generate clusters" width="90" x="45" y="255">
        <parameter key="set_iteration_macro" value="true"/>
        <parameter key="macro_name" value="iteration"/>
        <parameter key="macro_start_value" value="2"/>
        <parameter key="iterations" value="%{numberOfClusterIterations}"/>
        <parameter key="limit_time" value="false"/>
        <parameter key="timeout" value="1"/>
        <parameter key="parallelize_iteration" value="false"/>
        <process expanded="true" height="210" width="433">
          <operator activated="true" class="materialize_data" compatibility="5.3.000" expanded="true" height="76" name="Materialize Data" width="90" x="45" y="30">
            <parameter key="datamanagement" value="double_array"/>
          </operator>
          <operator activated="true" class="k_means" compatibility="5.3.000" expanded="true" height="76" name="Clustering" width="90" x="179" y="30">
            <parameter key="add_cluster_attribute" value="true"/>
            <parameter key="add_as_label" value="false"/>
            <parameter key="remove_unlabeled" value="false"/>
            <parameter key="k" value="%{iteration}"/>
            <parameter key="max_runs" value="10"/>
            <parameter key="determine_good_start_values" value="false"/>
            <parameter key="measure_types" value="NumericalMeasures"/>
            <parameter key="mixed_measure" value="MixedEuclideanDistance"/>
            <parameter key="nominal_measure" value="NominalDistance"/>
            <parameter key="numerical_measure" value="EuclideanDistance"/>
            <parameter key="divergence" value="SquaredEuclideanDistance"/>
            <parameter key="kernel_type" value="radial"/>
            <parameter key="kernel_gamma" value="1.0"/>
            <parameter key="kernel_sigma1" value="1.0"/>
            <parameter key="kernel_sigma2" value="0.0"/>
            <parameter key="kernel_sigma3" value="2.0"/>
            <parameter key="kernel_degree" value="3.0"/>
            <parameter key="kernel_shift" value="1.0"/>
            <parameter key="kernel_a" value="1.0"/>
            <parameter key="kernel_b" value="0.0"/>
            <parameter key="max_optimization_steps" value="100"/>
            <parameter key="use_local_random_seed" value="false"/>
            <parameter key="local_random_seed" value="1992"/>
          </operator>
          <operator activated="true" class="remember" compatibility="5.3.000" expanded="true" height="60" name="Remember: clusters" width="90" x="313" y="30">
            <parameter key="name" value="%{iteration}_model"/>
            <parameter key="io_object" value="CentroidClusterModel"/>
            <parameter key="store_which" value="1"/>
            <parameter key="remove_from_process" value="true"/>
          </operator>
          <operator activated="true" class="remember" compatibility="5.3.000" expanded="true" height="60" name="Remember: example set" width="90" x="313" y="120">
            <parameter key="name" value="%{iteration}"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="store_which" value="1"/>
            <parameter key="remove_from_process" value="true"/>
          </operator>
          <connect from_port="input 1" to_op="Materialize Data" to_port="example set input"/>
          <connect from_op="Materialize Data" from_port="example set output" to_op="Clustering" to_port="example set"/>
          <connect from_op="Clustering" from_port="cluster model" to_op="Remember: clusters" to_port="store"/>
          <connect from_op="Clustering" from_port="clustered set" to_op="Remember: example set" to_port="store"/>
          <portSpacing port="source_input 1" spacing="0"/>
          <portSpacing port="source_input 2" spacing="0"/>
          <portSpacing port="sink_output 1" spacing="0"/>
          <portSpacing port="sink_output 2" spacing="0"/>
        </process>
      </operator>
      <operator activated="true" class="optimize_parameters_grid" compatibility="5.3.000" expanded="true" height="94" name="Generate ground truth measures" width="90" x="45" y="390">
        <list key="parameters">
          <parameter key="Recall 1st example.name" value="2,3,4,5,6,7,8,9,10,11,12,13,14,15,16"/>
        </list>
        <parameter key="parallelize_optimization_process" value="false"/>
        <process expanded="true" height="361" width="835">
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall 1st example" width="90" x="45" y="30">
            <parameter key="name" value="16"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="remove_from_store" value="false"/>
          </operator>
          <operator activated="true" class="set_role" compatibility="5.3.000" expanded="true" height="76" name="Set cluster role regular" width="90" x="180" y="30">
            <parameter key="name" value="cluster"/>
            <parameter key="target_role" value="regular"/>
            <list key="set_additional_roles"/>
          </operator>
          <operator activated="true" class="rename" compatibility="5.3.000" expanded="true" height="76" name="Rename cluster to cluster1" width="90" x="313" y="30">
            <parameter key="old_name" value="cluster"/>
            <parameter key="new_name" value="cluster1"/>
            <list key="rename_additional_attributes"/>
          </operator>
          <operator activated="true" class="select_attributes" compatibility="5.3.000" expanded="true" height="76" name="Select cluster1 and id" width="90" x="447" y="30">
            <parameter key="attribute_filter_type" value="subset"/>
            <parameter key="attribute" value=""/>
            <parameter key="attributes" value="cluster1||id"/>
            <parameter key="use_except_expression" value="false"/>
            <parameter key="value_type" value="attribute_value"/>
            <parameter key="use_value_type_exception" value="false"/>
            <parameter key="except_value_type" value="time"/>
            <parameter key="block_type" value="attribute_block"/>
            <parameter key="use_block_type_exception" value="false"/>
            <parameter key="except_block_type" value="value_matrix_row_start"/>
            <parameter key="invert_selection" value="false"/>
            <parameter key="include_special_attributes" value="true"/>
          </operator>
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall ground truth" width="90" x="45" y="255">
            <description>For both data sets, the ground truth is 8 clusters - for other data sets, this number could be different. The recalled example set is the 8th but it does not have to be - the important point is renaming the ground truth cluster indicator - site - to cluster2 later.</description>
            <parameter key="name" value="8"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="remove_from_store" value="false"/>
          </operator>
          <operator activated="true" class="set_role" compatibility="5.3.000" expanded="true" height="76" name="Set site role regular" width="90" x="179" y="255">
            <parameter key="name" value="site"/>
            <parameter key="target_role" value="regular"/>
            <list key="set_additional_roles"/>
          </operator>
          <operator activated="true" class="rename" compatibility="5.3.000" expanded="true" height="76" name="Rename site to cluster2" width="90" x="313" y="255">
            <description>This renames the ground truth cluster which is called site to cluster2</description>
            <parameter key="old_name" value="site"/>
            <parameter key="new_name" value="cluster2"/>
            <list key="rename_additional_attributes"/>
          </operator>
          <operator activated="true" class="select_attributes" compatibility="5.3.000" expanded="true" height="76" name="Select cluster2 and id" width="90" x="447" y="255">
            <parameter key="attribute_filter_type" value="subset"/>
            <parameter key="attribute" value=""/>
            <parameter key="attributes" value="cluster2||id"/>
            <parameter key="use_except_expression" value="false"/>
            <parameter key="value_type" value="attribute_value"/>
            <parameter key="use_value_type_exception" value="false"/>
            <parameter key="except_value_type" value="time"/>
            <parameter key="block_type" value="attribute_block"/>
            <parameter key="use_block_type_exception" value="false"/>
            <parameter key="except_block_type" value="value_matrix_row_start"/>
            <parameter key="invert_selection" value="false"/>
            <parameter key="include_special_attributes" value="true"/>
          </operator>
          <operator activated="true" class="join" compatibility="5.3.000" expanded="true" height="76" name="Join cluster1 and cluster2" width="90" x="581" y="120">
            <parameter key="remove_double_attributes" value="true"/>
            <parameter key="join_type" value="inner"/>
            <parameter key="use_id_attribute_as_key" value="true"/>
            <list key="key_attributes"/>
            <parameter key="keep_both_join_attributes" value="false"/>
          </operator>
          <operator activated="true" class="subprocess" compatibility="5.3.000" expanded="true" height="76" name="Calculate groundTruthClusterValidityIndices" width="90" x="715" y="120">
            <parameter key="parallelize_nested_chain" value="false"/>
            <process expanded="true" height="151" width="367">
              <operator activated="true" class="r:execute_script_r" compatibility="5.3.000" expanded="true" height="76" name="R script: calculate validity indices" width="90" x="45" y="30">
                <description>Comment out these lines after the first run using ##
&lt;br&gt;
&lt;br&gt;
##install.packages("mclust")
##install.packages("profdpm")
</description>
                <parameter key="script" value="## the install command is needed the first time &#10;if (find.package(&quot;mclust&quot;) == &quot;&quot;) {install.packages(&quot;mclust&quot;)} else { }&#10;if (find.package(&quot;profdpm&quot;) == &quot;&quot;) {install.packages(&quot;profdpm&quot;)} else { }&#10;##install.packages(&quot;mclust&quot;)&#10;##install.packages(&quot;profdpm&quot;)&#10;&#10;## this loads the mclust and profdmp libraries&#10;library(mclust)&#10;library(profdpm)&#10;&#10;## &quot;data&quot; is defined as the input in the inputs&#10;## each column is referred to by name using the $ &#10;## operator because the input is a data frame.&#10;ARI = adjustedRandIndex(data$cluster1, data$cluster2)&#10;ARI = as.data.frame(ARI)&#10;pci = as.data.frame(t(pci(data$cluster1, data$cluster2)))&#10;&#10;## using the variable ARI sets the name of the returned data frame column &#10;## and avoids having to use a rename process&#10;## &quot;x&quot; is the output defined in the results &#10;## it must be a data frame&#10;x = as.data.frame(cbind(ARI,pci))&#10;&#10;"/>
                <enumeration key="inputs">
                  <parameter key="name_of_variable" value="data"/>
                </enumeration>
                <list key="results">
                  <parameter key="x" value="Data Table"/>
                </list>
              </operator>
              <operator activated="true" class="subprocess" compatibility="5.3.000" expanded="true" height="76" name="Extract ground truth performance measures" width="90" x="179" y="30">
                <parameter key="parallelize_nested_chain" value="false"/>
                <process expanded="true" height="720" width="836">
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="ARI (2)" width="90" x="112" y="30">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="ARI"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="FM (2)" width="90" x="112" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="FM"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="R (2)" width="90" x="313" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="R"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="W10 (2)" width="90" x="447" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="W10"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="W01 (2)" width="90" x="581" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="W01"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="J (2)" width="90" x="715" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="J"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <connect from_port="in 1" to_op="ARI (2)" to_port="example set"/>
                  <connect from_op="ARI (2)" from_port="performance" to_port="out 1"/>
                  <connect from_op="ARI (2)" from_port="example set" to_op="FM (2)" to_port="example set"/>
                  <connect from_op="FM (2)" from_port="example set" to_op="R (2)" to_port="example set"/>
                  <connect from_op="R (2)" from_port="example set" to_op="W10 (2)" to_port="example set"/>
                  <connect from_op="W10 (2)" from_port="example set" to_op="W01 (2)" to_port="example set"/>
                  <connect from_op="W01 (2)" from_port="example set" to_op="J (2)" to_port="example set"/>
                  <portSpacing port="source_in 1" spacing="0"/>
                  <portSpacing port="source_in 2" spacing="0"/>
                  <portSpacing port="sink_out 1" spacing="0"/>
                  <portSpacing port="sink_out 2" spacing="0"/>
                </process>
              </operator>
              <operator activated="true" class="log" compatibility="5.3.000" expanded="true" height="76" name="Log: Ground" width="90" x="313" y="30">
                <list key="log">
                  <parameter key="ARI" value="operator.ARI (2).value.performance"/>
                  <parameter key="FM" value="operator.FM (2).value.performance"/>
                  <parameter key="J" value="operator.J (2).value.performance"/>
                  <parameter key="R" value="operator.R (2).value.performance"/>
                  <parameter key="W01" value="operator.W01 (2).value.performance"/>
                  <parameter key="W10" value="operator.W10 (2).value.performance"/>
                  <parameter key="k1" value="operator.Recall 1st example.parameter.name"/>
                  <parameter key="k2" value="operator.Recall ground truth.parameter.name"/>
                </list>
                <parameter key="sorting_type" value="none"/>
                <parameter key="sorting_k" value="100"/>
                <parameter key="persistent" value="false"/>
              </operator>
              <connect from_port="in 1" to_op="R script: calculate validity indices" to_port="input 1"/>
              <connect from_op="R script: calculate validity indices" from_port="output 1" to_op="Extract ground truth performance measures" to_port="in 1"/>
              <connect from_op="Extract ground truth performance measures" from_port="out 1" to_op="Log: Ground" to_port="through 1"/>
              <connect from_op="Log: Ground" from_port="through 1" to_port="out 1"/>
              <portSpacing port="source_in 1" spacing="0"/>
              <portSpacing port="source_in 2" spacing="0"/>
              <portSpacing port="sink_out 1" spacing="0"/>
              <portSpacing port="sink_out 2" spacing="0"/>
            </process>
          </operator>
          <connect from_op="Recall 1st example" from_port="result" to_op="Set cluster role regular" to_port="example set input"/>
          <connect from_op="Set cluster role regular" from_port="example set output" to_op="Rename cluster to cluster1" to_port="example set input"/>
          <connect from_op="Rename cluster to cluster1" from_port="example set output" to_op="Select cluster1 and id" to_port="example set input"/>
          <connect from_op="Select cluster1 and id" from_port="example set output" to_op="Join cluster1 and cluster2" to_port="left"/>
          <connect from_op="Recall ground truth" from_port="result" to_op="Set site role regular" to_port="example set input"/>
          <connect from_op="Set site role regular" from_port="example set output" to_op="Rename site to cluster2" to_port="example set input"/>
          <connect from_op="Rename site to cluster2" from_port="example set output" to_op="Select cluster2 and id" to_port="example set input"/>
          <connect from_op="Select cluster2 and id" from_port="example set output" to_op="Join cluster1 and cluster2" to_port="right"/>
          <connect from_op="Join cluster1 and cluster2" from_port="join" to_op="Calculate groundTruthClusterValidityIndices" to_port="in 1"/>
          <connect from_op="Calculate groundTruthClusterValidityIndices" from_port="out 1" to_port="performance"/>
          <portSpacing port="source_input 1" spacing="0"/>
          <portSpacing port="source_input 2" spacing="0"/>
          <portSpacing port="sink_performance" spacing="0"/>
          <portSpacing port="sink_result 1" spacing="0"/>
        </process>
      </operator>
      <operator activated="true" class="log_to_data" compatibility="5.3.000" expanded="true" height="112" name="Ground truth measures" width="90" x="179" y="390">
        <parameter key="log_name" value="Log: Ground"/>
      </operator>
      <operator activated="true" class="guess_types" compatibility="5.3.000" expanded="true" height="76" name="Ground" width="90" x="313" y="390">
        <parameter key="attribute_filter_type" value="all"/>
        <parameter key="attribute" value=""/>
        <parameter key="attributes" value=""/>
        <parameter key="use_except_expression" value="false"/>
        <parameter key="value_type" value="attribute_value"/>
        <parameter key="use_value_type_exception" value="false"/>
        <parameter key="except_value_type" value="time"/>
        <parameter key="block_type" value="attribute_block"/>
        <parameter key="use_block_type_exception" value="false"/>
        <parameter key="except_block_type" value="value_matrix_row_start"/>
        <parameter key="invert_selection" value="false"/>
        <parameter key="include_special_attributes" value="false"/>
        <parameter key="decimal_point_character" value="."/>
      </operator>
      <operator activated="true" class="optimize_parameters_grid" compatibility="5.3.000" expanded="true" height="94" name="Generate external measures" width="90" x="45" y="525">
        <list key="parameters">
          <parameter key="Recall first.name" value="2,3,4,5,6,7,8,9,10,11,12,13,14,15,16"/>
          <parameter key="Recall second.name" value="2,3,4,5,6,7,8,9,10,11,12,13,14,15,16"/>
        </list>
        <parameter key="parallelize_optimization_process" value="false"/>
        <process expanded="true" height="809" width="815">
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall first" width="90" x="45" y="75">
            <parameter key="name" value="16"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="remove_from_store" value="false"/>
          </operator>
          <operator activated="true" class="set_role" compatibility="5.3.000" expanded="true" height="76" name="set first cluster role" width="90" x="179" y="75">
            <parameter key="name" value="cluster"/>
            <parameter key="target_role" value="regular"/>
            <list key="set_additional_roles"/>
          </operator>
          <operator activated="true" class="rename" compatibility="5.3.000" expanded="true" height="76" name="rename first cluster" width="90" x="313" y="75">
            <parameter key="old_name" value="cluster"/>
            <parameter key="new_name" value="cluster1"/>
            <list key="rename_additional_attributes"/>
          </operator>
          <operator activated="true" class="select_attributes" compatibility="5.3.000" expanded="true" height="76" name="select first cluster and id" width="90" x="447" y="75">
            <parameter key="attribute_filter_type" value="subset"/>
            <parameter key="attribute" value=""/>
            <parameter key="attributes" value="cluster1||id"/>
            <parameter key="use_except_expression" value="false"/>
            <parameter key="value_type" value="attribute_value"/>
            <parameter key="use_value_type_exception" value="false"/>
            <parameter key="except_value_type" value="time"/>
            <parameter key="block_type" value="attribute_block"/>
            <parameter key="use_block_type_exception" value="false"/>
            <parameter key="except_block_type" value="value_matrix_row_start"/>
            <parameter key="invert_selection" value="false"/>
            <parameter key="include_special_attributes" value="true"/>
          </operator>
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall second" width="90" x="45" y="255">
            <parameter key="name" value="16"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="remove_from_store" value="false"/>
          </operator>
          <operator activated="true" class="set_role" compatibility="5.3.000" expanded="true" height="76" name="set second cluster role" width="90" x="179" y="255">
            <parameter key="name" value="cluster"/>
            <parameter key="target_role" value="regular"/>
            <list key="set_additional_roles"/>
          </operator>
          <operator activated="true" class="rename" compatibility="5.3.000" expanded="true" height="76" name="rename second cluster" width="90" x="313" y="255">
            <parameter key="old_name" value="cluster"/>
            <parameter key="new_name" value="cluster2"/>
            <list key="rename_additional_attributes"/>
          </operator>
          <operator activated="true" class="select_attributes" compatibility="5.3.000" expanded="true" height="76" name="select second cluster and id" width="90" x="447" y="255">
            <parameter key="attribute_filter_type" value="subset"/>
            <parameter key="attribute" value=""/>
            <parameter key="attributes" value="cluster2||id"/>
            <parameter key="use_except_expression" value="false"/>
            <parameter key="value_type" value="attribute_value"/>
            <parameter key="use_value_type_exception" value="false"/>
            <parameter key="except_value_type" value="time"/>
            <parameter key="block_type" value="attribute_block"/>
            <parameter key="use_block_type_exception" value="false"/>
            <parameter key="except_block_type" value="value_matrix_row_start"/>
            <parameter key="invert_selection" value="false"/>
            <parameter key="include_special_attributes" value="true"/>
          </operator>
          <operator activated="true" class="join" compatibility="5.1.008" expanded="true" height="76" name="Join" width="90" x="581" y="165">
            <parameter key="remove_double_attributes" value="true"/>
            <parameter key="join_type" value="inner"/>
            <parameter key="use_id_attribute_as_key" value="true"/>
            <list key="key_attributes"/>
            <parameter key="keep_both_join_attributes" value="false"/>
          </operator>
          <operator activated="true" class="subprocess" compatibility="5.3.000" expanded="true" height="76" name="Calculate externalClusterValidityIndices" width="90" x="715" y="165">
            <parameter key="parallelize_nested_chain" value="false"/>
            <process expanded="true" height="687" width="980">
              <operator activated="true" class="r:execute_script_r" compatibility="5.3.000" expanded="true" height="76" name="Execute Script (2)" width="90" x="112" y="75">
                <parameter key="script" value="## the install command is needed the first time &#10;if (find.package(&quot;mclust&quot;) == &quot;&quot;) {install.packages(&quot;mclust&quot;)} else { }&#10;if (find.package(&quot;profdpm&quot;) == &quot;&quot;) {install.packages(&quot;profdpm&quot;)} else { }&#10;##install.packages(&quot;mclust&quot;)&#10;##install.packages(&quot;profdpm&quot;)&#10;&#10;## this loads the mclust and profdmp libraries&#10;library(mclust)&#10;library(profdpm)&#10;&#10;## &quot;data&quot; is defined as the input in the inputs&#10;## each column is referred to by name using the $ &#10;## operator because the input is a data frame.&#10;ARI = adjustedRandIndex(data$cluster1, data$cluster2)&#10;ARI = as.data.frame(ARI)&#10;pci=as.data.frame(t(pci(data$cluster1, data$cluster2)))&#10;&#10;&#10;## using the variable ARI sets the name of the returned data frame column &#10;## and avoids having to use a rename process&#10;## &quot;x&quot; is the output defined in the results &#10;## it must be a data frame&#10;x = as.data.frame(cbind(ARI,pci))&#10;&#10;"/>
                <enumeration key="inputs">
                  <parameter key="name_of_variable" value="data"/>
                </enumeration>
                <list key="results">
                  <parameter key="x" value="Data Table"/>
                </list>
              </operator>
              <operator activated="true" class="subprocess" compatibility="5.3.000" expanded="true" height="76" name="Extract external performance measures" width="90" x="246" y="75">
                <parameter key="parallelize_nested_chain" value="false"/>
                <process expanded="true" height="687" width="980">
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="ARI" width="90" x="45" y="30">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="ARI"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="FM" width="90" x="179" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="FM"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="R" width="90" x="313" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="R"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="W10" width="90" x="447" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="W10"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="W01" width="90" x="581" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="W01"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <operator activated="true" class="extract_performance" compatibility="5.3.000" expanded="true" height="76" name="J" width="90" x="715" y="165">
                    <parameter key="performance_type" value="data_value"/>
                    <parameter key="statistics" value="average"/>
                    <parameter key="attribute_name" value="J"/>
                    <parameter key="example_index" value="1"/>
                    <parameter key="optimization_direction" value="maximize"/>
                  </operator>
                  <connect from_port="in 1" to_op="ARI" to_port="example set"/>
                  <connect from_op="ARI" from_port="performance" to_port="out 1"/>
                  <connect from_op="ARI" from_port="example set" to_op="FM" to_port="example set"/>
                  <connect from_op="FM" from_port="example set" to_op="R" to_port="example set"/>
                  <connect from_op="R" from_port="example set" to_op="W10" to_port="example set"/>
                  <connect from_op="W10" from_port="example set" to_op="W01" to_port="example set"/>
                  <connect from_op="W01" from_port="example set" to_op="J" to_port="example set"/>
                  <portSpacing port="source_in 1" spacing="0"/>
                  <portSpacing port="source_in 2" spacing="0"/>
                  <portSpacing port="sink_out 1" spacing="0"/>
                  <portSpacing port="sink_out 2" spacing="0"/>
                </process>
              </operator>
              <operator activated="true" class="log" compatibility="5.3.000" expanded="true" height="76" name="Log: External" width="90" x="380" y="75">
                <list key="log">
                  <parameter key="ARI" value="operator.ARI.value.performance"/>
                  <parameter key="FM" value="operator.FM.value.performance"/>
                  <parameter key="J" value="operator.J.value.performance"/>
                  <parameter key="R" value="operator.R.value.performance"/>
                  <parameter key="W01" value="operator.W01.value.performance"/>
                  <parameter key="W10" value="operator.W10.value.performance"/>
                  <parameter key="k1" value="operator.Recall first.parameter.name"/>
                  <parameter key="k2" value="operator.Recall second.parameter.name"/>
                </list>
                <parameter key="sorting_type" value="none"/>
                <parameter key="sorting_k" value="100"/>
                <parameter key="persistent" value="false"/>
              </operator>
              <connect from_port="in 1" to_op="Execute Script (2)" to_port="input 1"/>
              <connect from_op="Execute Script (2)" from_port="output 1" to_op="Extract external performance measures" to_port="in 1"/>
              <connect from_op="Extract external performance measures" from_port="out 1" to_op="Log: External" to_port="through 1"/>
              <connect from_op="Log: External" from_port="through 1" to_port="out 1"/>
              <portSpacing port="source_in 1" spacing="0"/>
              <portSpacing port="source_in 2" spacing="0"/>
              <portSpacing port="sink_out 1" spacing="0"/>
              <portSpacing port="sink_out 2" spacing="0"/>
            </process>
          </operator>
          <connect from_op="Recall first" from_port="result" to_op="set first cluster role" to_port="example set input"/>
          <connect from_op="set first cluster role" from_port="example set output" to_op="rename first cluster" to_port="example set input"/>
          <connect from_op="rename first cluster" from_port="example set output" to_op="select first cluster and id" to_port="example set input"/>
          <connect from_op="select first cluster and id" from_port="example set output" to_op="Join" to_port="left"/>
          <connect from_op="Recall second" from_port="result" to_op="set second cluster role" to_port="example set input"/>
          <connect from_op="set second cluster role" from_port="example set output" to_op="rename second cluster" to_port="example set input"/>
          <connect from_op="rename second cluster" from_port="example set output" to_op="select second cluster and id" to_port="example set input"/>
          <connect from_op="select second cluster and id" from_port="example set output" to_op="Join" to_port="right"/>
          <connect from_op="Join" from_port="join" to_op="Calculate externalClusterValidityIndices" to_port="in 1"/>
          <connect from_op="Calculate externalClusterValidityIndices" from_port="out 1" to_port="performance"/>
          <portSpacing port="source_input 1" spacing="0"/>
          <portSpacing port="source_input 2" spacing="0"/>
          <portSpacing port="source_input 3" spacing="0"/>
          <portSpacing port="sink_performance" spacing="0"/>
          <portSpacing port="sink_result 1" spacing="0"/>
        </process>
      </operator>
      <operator activated="true" class="log_to_data" compatibility="5.3.000" expanded="true" height="112" name="External validity measures" width="90" x="179" y="525">
        <parameter key="log_name" value="Log: External"/>
      </operator>
      <operator activated="true" class="guess_types" compatibility="5.3.000" expanded="true" height="76" name="External" width="90" x="313" y="525">
        <parameter key="attribute_filter_type" value="all"/>
        <parameter key="attribute" value=""/>
        <parameter key="attributes" value=""/>
        <parameter key="use_except_expression" value="false"/>
        <parameter key="value_type" value="attribute_value"/>
        <parameter key="use_value_type_exception" value="false"/>
        <parameter key="except_value_type" value="time"/>
        <parameter key="block_type" value="attribute_block"/>
        <parameter key="use_block_type_exception" value="false"/>
        <parameter key="except_block_type" value="value_matrix_row_start"/>
        <parameter key="invert_selection" value="false"/>
        <parameter key="include_special_attributes" value="false"/>
        <parameter key="decimal_point_character" value="."/>
      </operator>
      <operator activated="true" class="loop" compatibility="5.3.000" expanded="true" height="94" name="Generate internal measures" width="90" x="45" y="660">
        <parameter key="set_iteration_macro" value="true"/>
        <parameter key="macro_name" value="iteration"/>
        <parameter key="macro_start_value" value="2"/>
        <parameter key="iterations" value="%{numberOfClusterIterations}"/>
        <parameter key="limit_time" value="false"/>
        <parameter key="timeout" value="1"/>
        <parameter key="parallelize_iteration" value="false"/>
        <process expanded="true" height="497" width="634">
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall cluster model" width="90" x="45" y="30">
            <parameter key="name" value="%{iteration}_model"/>
            <parameter key="io_object" value="CentroidClusterModel"/>
            <parameter key="remove_from_store" value="false"/>
          </operator>
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall ith example set" width="90" x="45" y="120">
            <parameter key="name" value="%{iteration}"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="remove_from_store" value="false"/>
          </operator>
          <operator activated="true" class="provide_macro_as_log_value" compatibility="5.3.000" expanded="true" height="76" name="Log iteration macro" width="90" x="45" y="210">
            <parameter key="macro_name" value="iteration"/>
          </operator>
          <operator activated="true" class="multiply" compatibility="5.3.000" expanded="true" height="112" name="Multiply (2)" width="90" x="179" y="30"/>
          <operator activated="true" class="multiply" compatibility="5.3.000" expanded="true" height="112" name="Multiply (3)" width="90" x="179" y="210"/>
          <operator activated="true" class="data_to_similarity" compatibility="5.3.000" expanded="true" height="76" name="Data to Similarity" width="90" x="179" y="345">
            <parameter key="measure_types" value="MixedMeasures"/>
            <parameter key="mixed_measure" value="MixedEuclideanDistance"/>
            <parameter key="nominal_measure" value="NominalDistance"/>
            <parameter key="numerical_measure" value="EuclideanDistance"/>
            <parameter key="divergence" value="GeneralizedIDivergence"/>
            <parameter key="kernel_type" value="radial"/>
            <parameter key="kernel_gamma" value="1.0"/>
            <parameter key="kernel_sigma1" value="1.0"/>
            <parameter key="kernel_sigma2" value="0.0"/>
            <parameter key="kernel_sigma3" value="2.0"/>
            <parameter key="kernel_degree" value="3.0"/>
            <parameter key="kernel_shift" value="1.0"/>
            <parameter key="kernel_a" value="1.0"/>
            <parameter key="kernel_b" value="0.0"/>
          </operator>
          <operator activated="true" class="item_distribution_performance" compatibility="5.3.000" expanded="true" height="76" name="Distribution SoS" width="90" x="380" y="30">
            <parameter key="measure" value="SumOfSquares"/>
          </operator>
          <operator activated="true" class="item_distribution_performance" compatibility="5.3.000" expanded="true" height="76" name="Distribution Gini" width="90" x="380" y="120">
            <parameter key="measure" value="GiniCoefficient"/>
          </operator>
          <operator activated="true" class="cluster_distance_performance" compatibility="5.3.000" expanded="true" height="94" name="Distance" width="90" x="380" y="210">
            <parameter key="main_criterion" value="Avg. within centroid distance"/>
            <parameter key="main_criterion_only" value="false"/>
            <parameter key="normalize" value="true"/>
            <parameter key="maximize" value="false"/>
          </operator>
          <operator activated="true" class="cluster_density_performance" compatibility="5.3.000" expanded="true" height="112" name="Density" width="90" x="380" y="345"/>
          <operator activated="true" class="log" compatibility="5.3.000" expanded="true" height="76" name="Log: Internal" width="90" x="514" y="30">
            <list key="log">
              <parameter key="DaviesBouldin" value="operator.Distance.value.DaviesBouldin"/>
              <parameter key="avgWithinDistance" value="operator.Distance.value.avg_within_distance"/>
              <parameter key="k" value="operator.Log iteration macro.value.macro_value"/>
              <parameter key="itemDistribution" value="operator.Distribution SoS.value.item_distribution"/>
              <parameter key="Gini" value="operator.Distribution Gini.value.item_distribution"/>
              <parameter key="clusterDensity" value="operator.Density.value.clusterdensity"/>
            </list>
            <parameter key="sorting_type" value="none"/>
            <parameter key="sorting_k" value="100"/>
            <parameter key="persistent" value="false"/>
          </operator>
          <connect from_op="Recall cluster model" from_port="result" to_op="Multiply (2)" to_port="input"/>
          <connect from_op="Recall ith example set" from_port="result" to_op="Log iteration macro" to_port="through 1"/>
          <connect from_op="Log iteration macro" from_port="through 1" to_op="Multiply (3)" to_port="input"/>
          <connect from_op="Multiply (2)" from_port="output 1" to_op="Distribution SoS" to_port="cluster model"/>
          <connect from_op="Multiply (2)" from_port="output 2" to_op="Distance" to_port="cluster model"/>
          <connect from_op="Multiply (2)" from_port="output 3" to_op="Density" to_port="cluster model"/>
          <connect from_op="Multiply (3)" from_port="output 1" to_op="Distance" to_port="example set"/>
          <connect from_op="Multiply (3)" from_port="output 2" to_op="Density" to_port="example set"/>
          <connect from_op="Multiply (3)" from_port="output 3" to_op="Data to Similarity" to_port="example set"/>
          <connect from_op="Data to Similarity" from_port="similarity" to_op="Density" to_port="distance measure"/>
          <connect from_op="Distribution SoS" from_port="cluster model" to_op="Distribution Gini" to_port="cluster model"/>
          <connect from_op="Log: Internal" from_port="through 1" to_port="output 1"/>
          <portSpacing port="source_input 1" spacing="0"/>
          <portSpacing port="source_input 2" spacing="0"/>
          <portSpacing port="source_input 3" spacing="0"/>
          <portSpacing port="sink_output 1" spacing="0"/>
          <portSpacing port="sink_output 2" spacing="0"/>
        </process>
      </operator>
      <operator activated="true" class="log_to_data" compatibility="5.3.000" expanded="true" height="94" name="Internal validity measures" width="90" x="179" y="660">
        <parameter key="log_name" value="Log: Internal"/>
      </operator>
      <operator activated="true" class="guess_types" compatibility="5.3.000" expanded="true" height="76" name="Internal" width="90" x="313" y="660">
        <parameter key="attribute_filter_type" value="all"/>
        <parameter key="attribute" value=""/>
        <parameter key="attributes" value=""/>
        <parameter key="use_except_expression" value="false"/>
        <parameter key="value_type" value="attribute_value"/>
        <parameter key="use_value_type_exception" value="false"/>
        <parameter key="except_value_type" value="time"/>
        <parameter key="block_type" value="attribute_block"/>
        <parameter key="use_block_type_exception" value="false"/>
        <parameter key="except_block_type" value="value_matrix_row_start"/>
        <parameter key="invert_selection" value="false"/>
        <parameter key="include_special_attributes" value="false"/>
        <parameter key="decimal_point_character" value="."/>
      </operator>
      <operator activated="true" class="loop" compatibility="5.3.000" expanded="true" height="94" name="Output clusters and partitioning" width="90" x="447" y="30">
        <parameter key="set_iteration_macro" value="true"/>
        <parameter key="macro_name" value="iteration"/>
        <parameter key="macro_start_value" value="2"/>
        <parameter key="iterations" value="%{numberOfClusterIterations}"/>
        <parameter key="limit_time" value="false"/>
        <parameter key="timeout" value="1"/>
        <parameter key="parallelize_iteration" value="false"/>
        <process expanded="true" height="584" width="836">
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall: example set" width="90" x="112" y="75">
            <parameter key="name" value="%{iteration}"/>
            <parameter key="io_object" value="ExampleSet"/>
            <parameter key="remove_from_store" value="true"/>
          </operator>
          <operator activated="true" class="recall" compatibility="5.3.000" expanded="true" height="60" name="Recall: clusters" width="90" x="112" y="165">
            <parameter key="name" value="%{iteration}_model"/>
            <parameter key="io_object" value="CentroidClusterModel"/>
            <parameter key="remove_from_store" value="true"/>
          </operator>
          <connect from_op="Recall: example set" from_port="result" to_port="output 1"/>
          <connect from_op="Recall: clusters" from_port="result" to_port="output 2"/>
          <portSpacing port="source_input 1" spacing="0"/>
          <portSpacing port="sink_output 1" spacing="0"/>
          <portSpacing port="sink_output 2" spacing="0"/>
          <portSpacing port="sink_output 3" spacing="0"/>
        </process>
      </operator>
      <connect from_op="Generate data for testing" from_port="output" to_op="Rename" to_port="example set input"/>
      <connect from_op="Rename" from_port="example set output" to_op="Generate clusters" to_port="input 1"/>
      <connect from_op="Execute Process" from_port="result 1" to_op="Select Attributes" to_port="example set input"/>
      <connect from_op="Generate clusters" from_port="output 1" to_op="Generate ground truth measures" to_port="input 1"/>
      <connect from_op="Generate ground truth measures" from_port="performance" to_op="Ground truth measures" to_port="through 1"/>
      <connect from_op="Generate ground truth measures" from_port="parameter" to_op="Ground truth measures" to_port="through 2"/>
      <connect from_op="Ground truth measures" from_port="exampleSet" to_op="Ground" to_port="example set input"/>
      <connect from_op="Ground truth measures" from_port="through 1" to_op="Generate external measures" to_port="input 1"/>
      <connect from_op="Ground truth measures" from_port="through 2" to_op="Generate external measures" to_port="input 2"/>
      <connect from_op="Ground" from_port="example set output" to_port="result 3"/>
      <connect from_op="Generate external measures" from_port="performance" to_op="External validity measures" to_port="through 1"/>
      <connect from_op="Generate external measures" from_port="parameter" to_op="External validity measures" to_port="through 2"/>
      <connect from_op="External validity measures" from_port="exampleSet" to_op="External" to_port="example set input"/>
      <connect from_op="External validity measures" from_port="through 1" to_op="Generate internal measures" to_port="input 1"/>
      <connect from_op="External validity measures" from_port="through 2" to_op="Generate internal measures" to_port="input 2"/>
      <connect from_op="External" from_port="example set output" to_port="result 4"/>
      <connect from_op="Generate internal measures" from_port="output 1" to_op="Internal validity measures" to_port="through 1"/>
      <connect from_op="Internal validity measures" from_port="exampleSet" to_op="Internal" to_port="example set input"/>
      <connect from_op="Internal" from_port="example set output" to_port="result 5"/>
      <connect from_op="Output clusters and partitioning" from_port="output 1" to_port="result 1"/>
      <connect from_op="Output clusters and partitioning" from_port="output 2" to_port="result 2"/>
      <portSpacing port="source_input 1" spacing="0"/>
      <portSpacing port="sink_result 1" spacing="0"/>
      <portSpacing port="sink_result 2" spacing="0"/>
      <portSpacing port="sink_result 3" spacing="0"/>
      <portSpacing port="sink_result 4" spacing="0"/>
      <portSpacing port="sink_result 5" spacing="0"/>
      <portSpacing port="sink_result 6" spacing="0"/>
    </process>
  </operator>
</process>
